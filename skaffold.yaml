apiVersion: skaffold/v2beta23
kind: Config
metadata:
  name: holefeeder
build:
  artifacts:
  - image: holefeeder-web
    context: .
    docker:
      dockerfile: src/Web/Holefeeder.Web/Dockerfile
  - image: holefeeder-budgeting-api
    context: .
    docker:
      dockerfile: src/Services/Budgeting/Budgeting.API/Dockerfile
  - image: holefeeder-object-store-api
    context: .
    docker:
      dockerfile: src/Services/ObjectStore/ObjectStore.API/Dockerfile
profiles:
  - name: dev
    deploy:
      kustomize:
        paths: ["kubernetes/dev"]
  - name: stg
    deploy:
      kustomize:
        paths: ["kubernetes/stg"]
  - name: prd
    deploy:
      kustomize:
        paths: ["kubernetes/prd"]
deploy:
  kustomize:
    paths: ["kubernetes/dev"]
