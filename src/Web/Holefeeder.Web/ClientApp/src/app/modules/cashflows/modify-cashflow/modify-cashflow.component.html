<ng-container *ngIf="values$ | async; else loader">
  <div class="pt-3 pb-4 mb-3">
    <div class="container">
      <h4 class="mb-0 line-height-1 text-truncate">
        Modify cashflow
      </h4>
      <div class="container mb-5">
        <form (ngSubmit)="onSubmit()" [formGroup]="form">
          <ng-container *ngIf="values$ | async as values">

            <div [formGroup]="form" class="container mt-2">
              <div class="form-group">
                <label for="amount">Amount</label>
                <input class="form-control" dftaAutofocus formControlName="amount" id="amount"
                       placeholder="cashflow amount..."
                       required type="number"/>
              </div>
              <div class="form-group">
                <label for="category">Category</label>
                <select class="form-control" formControlName="category" id="category" required>
                  <option *ngFor="let category of categories$ | async"
                          [ngValue]="category.id">{{ category.name }}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="account">Account</label>
                <select class="form-control" formControlName="account" id="account" required>
                  <option *ngFor="let account of accounts$ | async" [ngValue]="account.id">{{
                    account.name
                    }}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="tags">Tags</label>
                <app-tags-input [tagsArray]="tags" formArrayName="tags" id="tags"></app-tags-input>
              </div>
              <div class="form-group">
                <label for="interval">Interval type</label>
                <select class="form-control" formControlName="intervalType" id="interval"
                        required>
                  <option *ngFor="let interval of (intervalTypesNames | keyvalue)" [ngValue]="interval.key">
                    {{ interval.value }}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="frequency">Frequency</label>
                <input class="form-control" formControlName="frequency" id="frequency" min="1" required type="number"/>
              </div>
              <app-date-picker label="Effective date" formControlName="effectiveDate" [required]="true"></app-date-picker>
              <div class="form-group">
                <label for="description">Note</label>
                <input [placeholder]="'transaction note...'" class="form-control" formControlName="description"
                       id="description"
                       type="text"/>
              </div>
            </div>
          </ng-container>

          <div class="d-flex justify-content-end mt-4">
            <button (click)="onCancel()" class="btn btn-danger me-2" title="Disable"
                    type="button">Disable
            </button>
            <button (click)="goBack()" class="btn btn-secondary me-2" title="Cancel" type="button">
              Cancel
            </button>
            <button [disabled]="!form.valid" class="btn btn-primary" title="Save" type="submit">
              Save
            </button>
          </div>

          <em *ngIf="!form.valid" class="form-text text-danger">{{ form.errors }}</em>
        </form>
      </div>
    </div>
  </div>
</ng-container>
<ng-template #loader>
  <app-loader></app-loader>
</ng-template>
